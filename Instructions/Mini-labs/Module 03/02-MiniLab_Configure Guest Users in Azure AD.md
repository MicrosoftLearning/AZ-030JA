# ミニラボ: Azure でゲスト ユーザーを Azure AD に追加する

ゲスト ユーザーとしてディレクトリに追加することで、誰でも組織とのコラボレーションに招待できます。その後、引き換えリンクを含む招待メールを送信するか、共有したいアプリに直接リンクを送信できます。 

ゲスト ユーザーは、自分の職場、学校、またはソーシャル ID を使用してサインインできます。

このミニラボでは、新しいゲスト ユーザーを Azure AD に追加し、招待状を送信します。

## 前提条件

このミニラボでシナリオを完了するには、次のものが必要です。

* グローバル管理者ロールや制限付き管理者ディレクトリロールなどのテナント ディレクトリにユーザーを作成できるロール。

* テナント ディレクトリに追加でき、テスト用の招待メールの受信に使用できる有効な電子メール アカウント。

## ゲスト ユーザーを Azure AD に追加する

1. Azure AD管理者として[ Azure portal](https://portal.azure.com/)にサインインします。

2. 左側のペインで、 **Azure Active Directory** を選択します。

3. 「**管理**」で、 「**ユーザー**」 を選択します。

    ![[ユーザー] オプションを選択する場所を示すスクリーンショット](../../Linked_Image_Files/guest_user_image1.png)

4. 「**新しいゲスト ユーザー**」 を選択します。

    ![[新しいゲスト ユーザー] オプションを選択する場所を示すスクリーンショット](../../Linked_Image_Files/guest_user_image2.png)

5. 「**新しいユーザー**」 ページで、 「**ユーザーの招待**」 を選択し、ゲスト ユーザーの情報を追加します。   

    ![[新しいゲスト ユーザー] オプションを選択する場所を示すスクリーンショット](../../Linked_Image_Files/guest_user_image3.png)

    - **名前** ゲスト ユーザーの姓名。

    - **電子メール アドレス (必須)** ゲスト ユーザーの電子メール アドレス。

    - **個人メッセージ (オプション)** ゲスト ユーザーへの個人的なウェルカム メッセージを含めます。

    - **グループ** ゲスト ユーザーは、1 つ以上の既存のグループに追加することも、後で追加することもできます。

    - **ディレクトリ ロール** ユーザーに Azure AD の管理アクセス許可が必要な場合は、Azure AD ロールに追加できます。

6. 「**招待**」 を選択すると、招待がゲスト ユーザーに自動的に送信されます。右上に通知が表示され、「ユーザーを招待しました」というメッセージが表示されます。

7. 招待状を送信すると、ユーザー アカウントがゲストとしてディレクトリに自動的に追加されます。

## アプリをゲスト ユーザーに割り当てる

テスト テナントに *GitHub Enterprise アプリの Active Directory* を追加し、テスト ゲスト ユーザーをアプリに割り当てます。

1. Azure portal に Azure AD 管理者としてサインインします。

2. 左側のペインで、 **エンタープライズ アプリケーション**を選択します。

3. **「新しいアプリ」** を選択します。

    ![ギャラリー検索ボックスからの追加を示すスクリーンショット](../../Linked_Image_Files/guest_user_image4.png)

4. **ギャラリーから追加**で、 **GitHub** を検索し、 **GitHub Enterpriseの Active Directory**を選択します。 

    ![ギャラリー検索ボックスからの追加を示すスクリーンショット](../../Linked_Image_Files/guest_user_image6.png)

5. 「**追加**」 を選択します。

6. 「管理」 で 「シングル **サインオン**」 を選択し、 「**シングル サインオン モード**」 の 「**パスワード ベースのサインオン**」 を選択して、 「**追加**」 をクリック します。

    ![ギャラリー検索ボックスからの追加を示すスクリーンショット](../../Linked_Image_Files/guest_user_image7.png)

7. 「**管理**」 で、 「**ユーザーとグループ」 > 「ユーザーとグループの追加」 > 「ユーザーとグループ**」 を選択し、 「**選択**」 をクリックします。

    ![グループへのユーザーの追加を示すスクリーンショット。](../../Linked_Image_Files/guest_user_image9.png)

8. **割り当て**を選択します。

## ゲスト ユーザーの招待を受け入れる

ゲスト ユーザーのメール アカウントにサインインして、招待を表示します。

1. テスト ゲスト ユーザーのメール アカウントにサインインします。

2. 受信トレイで、 "*招待されました*" というメールを見つけます。

3. メールの本文で、「はじめに」 を選択します。「アクセス許可の確認」 ページがブラウザーで開きます。

4. 「**招待を承認**」 を選択します。アクセス パネルが開き、ゲスト ユーザーがアクセスできるアプリケーションが一覧表示されます。

    ![[アクセス許可の確認] ページのスクリーンショット。](../../Linked_Image_Files/guest_user_image5.png)
